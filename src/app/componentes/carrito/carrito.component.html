<app-navbar></app-navbar>
{{usuario}}

<div *ngIf="items.length >0 ; then thenBlock else elseBlock"></div>
<ng-template #thenBlock>

    <div class="container col-xxl-8 px-4 py-5">
      <table class="table table-striped">
    <thead>
      <tr class="table-primary">
        <th scope="col">id</th>
        <th scope="col">producto</th>
        <th scope="col"></th>
        <th scope="col">precio</th>
        <th scope="col">cantidad</th>
        <th scope="col"></th>
        <th scope="col">total</th>
      </tr>
      </thead>
     <tbody>
      <!-- esto me tira el problema que duplica la cantidad de items en la vista-->
      <ng-container *ngFor=" let item of items">
        <tr>
          <td>{{item.key}}</td>
          <td>{{item.nombre}} Talle: {{item.talle}}</td>
          <td></td>
          <td>{{item.precio}}</td>
          <td>
            <div class="input-group input-group-sm mb-3">
              <button type="button" class="btn btn-light btn-sm" (click)="restarCantidad(item)">-</button>
              <span> {{item.cantidad}}</span>
              <button type="button" class="btn btn-light btn-sm" (click)="agregarCantidad(item)">+</button>
            </div>
          </td>
          <td><button type="button" class="btn btn-outline-danger btn-sm"
              (click)="eliminarItem(item.key)">Eliminar</button></td>
          <td>{{item.precio*item.cantidad | currency:'ARS ' :'symbol':'4.0-1'}}</td>
        </tr>
      </ng-container>
     </tbody>
   
     </table>
   </div>

   <div class="container text-center">
    <div class="row">
      <div class="col-md-8">buscador punto de entrega</div>
      <div class="col-6 col-md-4">
   
  <div class="container">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">Sub Total</th>
          <th scope="col"><span class="input-group-text">{{subtotal}}</span></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th scope="row">Envio</th>
          <td><span class="input-group-text">{{envio}}</span></td>
        </tr>
        <tr>
          <th scope="row">Total</th>
          <td><span class="input-group-text">{{total}}</span></td>
        </tr>
        <tr>
          <th scope="row"><button type="button" class="btn btn-danger btn-sm" (click)="clearCart()">Borrar
              Carrito</button></th>
          <td><button *ngIf="!isLogged" [routerLink]="['/login']" type="button" class="btn btn-primary btn-sm">Ingresar Para Finalziar</button>
            <button *ngIf="!isLogged" [routerLink]="['/crearcuenta']" type="button" class="btn btn-primary btn-sm">Registrarse Finalziar</button>
            <button *ngIf="isLogged" type="button" class="btn btn-success" (click)="FinalizarCompra()"  >Terminar Compra</button></td>
        </tr>
      </tbody>
     
       </table>
  
    </div></div>
  </div>
</div>

</ng-template>
<ng-template #elseBlock>
  <div class="p-5 mb-4 bg-light rounded-3" style="background-image: url('./assets/fondoCarritoVacio.jpg'); width: 100; height: 100; ">
    <div class="container-fluid py-5">
      <h1 class="display-5 fw-bold">El carrito Esta vacio</h1>
      <!--
      <p class="col-md-8 fs-4">REGISTRATE Y RECIB√ç NOVEDADES GRID</p>
      <button class="btn btn-primary btn-lg" type="button" [routerLink]="['crearcuenta']">Registrarme</button>     
       --> 
      <p class="col-md-8 fs-4"></p>
      <button class="btn btn-primary btn-lg" type="button" [routerLink]="['']">Ver la Tienda</button>
    </div>
  </div>

</ng-template>
  

<app-footer></app-footer>